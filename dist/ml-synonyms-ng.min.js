!function(){"use strict";angular.module("ml.synonyms",["ml.common","ml.synonyms.tpls"])}(),function(){"use strict";function n(){return{restrict:"E",scope:{synonyms:"=",data:"=?",addSynonym:"&?",removeSynonym:"&?",fromLabel:"@?",toLabel:"@?"},templateUrl:"/ml-synonyms-ng/ml-synonyms.html",link:function(n,t,a){n.fromLabel=n.fromLabel||"From",n.toLabel=n.toLabel||"To"}}}angular.module("ml.synonyms").directive("mlSynonyms",n),n.$inject=[]}(),function(){"use strict";function n(n){return{newSparqlService:function(a){return new t(n,a)}}}function t(n,t){function a(n){var t={};return angular.forEach(n,function(n,a){var o=n.from.value,e=n.to.value,r=!!n.direct;t[o]||(t[o]=[]),t[o].push({to:e,direct:r})}),t}function o(){var t="        SELECT DISTINCT ?from ?to ?direct         WHERE {           { ?from (<"+m+">|^<"+m+">)* ?to .             OPTIONAL {               ?from (<"+m+">|^<"+m+">) ?direct .               FILTER ( ?direct = ?to )             }           }           FILTER ( ?from != ?to )         }         ORDER BY ?from ?to       ";return n.sparql(t).then(function(n){return n&&n.data&&n.data.results&&a(n.data.results.bindings)})}function e(){return n.things(""+m).then(function(n){return{data:n&&n.data}})}function r(t,a){var o='        INSERT DATA {           "'+t+'" <'+m+'> "'+a+'".         }       ';return n.sparqlUpdate(o)}function s(t,a){var o='        DELETE DATA {           "'+t+'" <'+m+'> "'+a+'".           "'+a+'" <'+m+'> "'+t+'".         }       ';return n.sparqlUpdate(o)}var m=t&&t.predicate||"http://www.w3.org/2002/07/owl#sameAs";return n.sparqlUpdate=function(t,a){return a=a||{},n.request("/graphs/sparql",{method:"POST",params:a,data:t,headers:{Accept:"application/sparql-results+json","Content-Type":"application/sparql-update"}})},n.things=function(t,a){return a=a||{},a.iri=t,n.request("/graphs/things",{params:a,headers:{Accept:"application/n-triples"}})},{getSynonyms:o,getData:e,addSynonym:r,removeSynonym:s}}angular.module("ml.synonyms").factory("MLSynonymsFactory",n),n.$inject=["MLRest"]}(),function(n){try{n=angular.module("ml.synonyms.tpls")}catch(t){n=angular.module("ml.synonyms.tpls",[])}n.run(["$templateCache",function(n){n.put("/ml-synonyms-ng/ml-synonyms.html",'<div class="ml-synonyms">\n  <form ng-if="addSynonym" class="form-inline" ng-submit="addSynonym({from: newFrom, to: newTo})">\n    <input type="text" placeholder="{{fromLabel}}.." ng-model="newFrom">\n    <input type="text" placeholder="{{toLabel}}.." ng-model="newTo">\n    <button ng-disabled="!newFrom || !newTo" class="btn btn-default btn-sm"><i class="fa fa-link fa-2x" ng-click="addSynonym({from: newFrom, to: newTo})"></i></button>\n  </form>\n  <table class="table-hover">\n    <thead>\n      <tr>\n        <th>{{fromLabel}}</th>\n        <th>\n        <th>{{toLabel}}</th>\n        <th>\n      </tr>\n    </thead>\n    <tbody ng-repeat="(key, syns) in synonyms">\n      <tr ng-repeat="synonym in syns">\n        <td class="from"><span ng-if="$first">{{key}}</span></td>\n        <td class="link">{{ $first ? (!$last ? \'┳\' : \'━\') : (!$last ? \'┣\' : \'┗\') }}</td>\n        <td class="to">{{synonym.to}}</td>\n        <td class="action" ng-if="addSynonym || removeSynonym">\n          <a href ng-if="removeSynonym && synonym.direct"><i class="fa fa-unlink" ng-click="removeSynonym({from: key, to: synonym.to})"></i></a>\n          <a href ng-if="addSynonym && !synonym.direct"><i class="fa fa-link" ng-click="addSynonym({from: key, to: synonym.to})"></i></a>\n        </td>\n      </tr>\n    </tbody>\n  </table>\n  <div ng-if="data.data">\n    <button class="btn btn-default btn-sm" ng-click="showData = !showData">{{showData ? \'Hide\' : \'Show\'}} Data</button>\n    <pre ng-show="showData">{{data.data}}</pre>\n  </div>\n</div>')}])}();